<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
<!-- FORMS -->
	<!-- FORM res.partner establecimientos-->
    <record id="res_partner_establecimientos_inherit_form" model="ir.ui.view">
        <field name="name">res.partner.establecimientos.view.form</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
           	<!-- xpath expr="//field[@name='website']" position="after">	           	
            	<group string="Establecimientos" colspan="4">	            		
            		<field name='bodega_id' colspan="2"/>       			            		            			            		
           			<field name='restaurante_id' colspan="2"/>
            		<field name='hospedaje_id' colspan="2"/>	            		             	
               	</group>	               	
            </xpath-->
            
        	<xpath expr="//page[@string='Contacts']" position="before">
        		<page string="Productos">    		
    				<group string="Productos Contratados">
    					<field name="product_contratado_cliente_ids" nolabel="1"/>	    					
           			</group>
          			</page>
	 			<page string="Establecimientos">
	 				<group string="Bodegas">	 						 						 						  					
        				<field name='establecimiento_ids' widget='many2many_kanban' nolabel="1" context="{'res_partner_id':id,'tipo':'bodega'}">
        				    <kanban>
						        <field name="nombre"/>
						        <templates>
					                <t t-name="kanban-box">
					                	<a t-if="! read_only_mode" type="delete" style="position: absolute; right: 0; padding: 4px; diplay: inline-block">X</a>
					                    <div class="oe_kanban_vignette oe_semantic_html_override">
					                    	<a type="open">
					                    		<img t-att-src="kanban_image('turismo.establecimiento', 'imagen', record.id.value)"  class="oe_kanban_image"/>
					                    	</a>
					                    	<div class="oe_kanban_details">
					                    		<h4><a type="open"> <field name="nombre"/></a></h4>
					                    		<ul>
													<li t-if="record.direccion.raw_value">
														<field name="direccion"/>
													</li>
													<li t-if="record.localidad.raw_value">
														<field name="localidad"/>
													</li>													
					                    		</ul>
					                    	</div>
					                    </div>
					                </t>
						        </templates>
						    </kanban>
        				</field>
       				</group>	        		
		 			<group string="Restaurantes">		 					 						 						  					
        				<field name='establecimiento_ids' widget='many2many_kanban' nolabel="1" context="{'res_partner_id':id,'tipo':'restaurante'}">
        				    <kanban>
						        <field name="nombre"/>
						        <templates>
					                <t t-name="kanban-box">
					                	<a t-if="! read_only_mode" type="delete" style="position: absolute; right: 0; padding: 4px; diplay: inline-block">X</a>
					                    <div class="oe_kanban_vignette oe_semantic_html_override">
					                    	<a type="open">
					                    		<img t-att-src="kanban_image('turismo.establecimiento', 'imagen', record.id.value)"  class="oe_kanban_image"/>
					                    	</a>
					                    	<div class="oe_kanban_details">
					                    		<h4><a type="open"> <field name="nombre"/></a></h4>
					                    		<ul>
													<li t-if="record.direccion.raw_value">
														<field name="direccion"/>
													</li>
													<li t-if="record.localidad.raw_value">
														<field name="localidad"/>
													</li>													
					                    		</ul>
					                    	</div>
					                    </div>
					                </t>
						        </templates>
						    </kanban>		        				
        				</field>		        		       				      		
	        		</group>
	 				<group string="Hospedajes">		 						 						 						  					
        				<field name='establecimiento_ids' widget='many2many_kanban' nolabel="1" context="{'res_partner_id':id,'tipo':'hospedaje'}">
        				    <kanban>
						        <field name="nombre"/>
						        <templates>
					                <t t-name="kanban-box">
					                	<a t-if="! read_only_mode" type="delete" style="position: absolute; right: 0; padding: 4px; diplay: inline-block">X</a>
					                    <div class="oe_kanban_vignette oe_semantic_html_override">
					                    	<a type="open">
					                    		<img t-att-src="kanban_image('turismo.establecimiento', 'imagen', record.id.value)"  class="oe_kanban_image"/>
					                    	</a>
					                    	<div class="oe_kanban_details">
					                    		<h4><a type="open"> <field name="nombre"/></a></h4>
					                    		<ul>
													<li t-if="record.direccion.raw_value">
														<field name="direccion"/>
													</li>
													<li t-if="record.localidad.raw_value">
														<field name="localidad"/>
													</li>													
					                    		</ul>
					                    	</div>
					                    </div>
					                </t>
						        </templates>
						    </kanban>		        				
        				</field>
       				</group> 
	 				<group string="Arte y Cultura">	 						 						 						  					
        				<field name='establecimiento_ids' widget='many2many_kanban' nolabel="1" context="{'res_partner_id':id,'tipo':'cultural'}">
        				    <kanban>
						        <field name="nombre"/>
						        <templates>
					                <t t-name="kanban-box">
					                	<a t-if="! read_only_mode" type="delete" style="position: absolute; right: 0; padding: 4px; diplay: inline-block">X</a>
					                    <div class="oe_kanban_vignette oe_semantic_html_override">
					                    	<a type="open">
					                    		<img t-att-src="kanban_image('turismo.establecimiento', 'imagen', record.id.value)"  class="oe_kanban_image"/>
					                    	</a>
					                    	<div class="oe_kanban_details">
					                    		<h4><a type="open"> <field name="nombre"/></a></h4>
					                    		<ul>
													<li t-if="record.direccion.raw_value">
														<field name="direccion"/>
													</li>
													<li t-if="record.localidad.raw_value">
														<field name="localidad"/>
													</li>													
					                    		</ul>
					                    	</div>
					                    </div>
					                </t>
						        </templates>
						    </kanban>
        				</field>
       				</group>
	 				<group string="Vinotecas">	 						 						 						  					
        				<field name='establecimiento_ids' widget='many2many_kanban' nolabel="1" context="{'res_partner_id':id,'tipo':'vinoteca'}">
        				    <kanban>
						        <field name="nombre"/>
						        <templates>
					                <t t-name="kanban-box">
					                	<a t-if="! read_only_mode" type="delete" style="position: absolute; right: 0; padding: 4px; diplay: inline-block">X</a>
					                    <div class="oe_kanban_vignette oe_semantic_html_override">
					                    	<a type="open">
					                    		<img t-att-src="kanban_image('turismo.establecimiento', 'imagen', record.id.value)"  class="oe_kanban_image"/>
					                    	</a>
					                    	<div class="oe_kanban_details">
					                    		<h4><a type="open"> <field name="nombre"/></a></h4>
					                    		<ul>
													<li t-if="record.direccion.raw_value">
														<field name="direccion"/>
													</li>
													<li t-if="record.localidad.raw_value">
														<field name="localidad"/>
													</li>													
					                    		</ul>
					                    	</div>
					                    </div>
					                </t>
						        </templates>
						    </kanban>
        				</field>
       				</group>            				
	 				<group string="Otros">	 						 						 						  					
        				<field name='establecimiento_ids' widget='many2many_kanban' nolabel="1" context="{'res_partner_id':id,'tipo':'otro'}">
        				    <kanban>
						        <field name="nombre"/>
						        <templates>
					                <t t-name="kanban-box">
					                	<a t-if="! read_only_mode" type="delete" style="position: absolute; right: 0; padding: 4px; diplay: inline-block">X</a>
					                    <div class="oe_kanban_vignette oe_semantic_html_override">
					                    	<a type="open">
					                    		<img t-att-src="kanban_image('turismo.establecimiento', 'imagen', record.id.value)"  class="oe_kanban_image"/>
					                    	</a>
					                    	<div class="oe_kanban_details">
					                    		<h4><a type="open"> <field name="nombre"/></a></h4>
					                    		<ul>
													<li t-if="record.direccion.raw_value">
														<field name="direccion"/>
													</li>
													<li t-if="record.localidad.raw_value">
														<field name="localidad"/>
													</li>													
					                    		</ul>
					                    	</div>
					                    </div>
					                </t>
						        </templates>
						    </kanban>
        				</field>
       				</group>       			       				      		
        		</page>        				        		
        	</xpath>	        	        
        </field>	        
    </record>
    <!-- FORM de un Establecimiento -->
	<record id="establecimiento_view_form" model="ir.ui.view">
            <field name="name">establecimiento.form</field>
            <field name="model">turismo.establecimiento</field>  	
            <field name="arch" type="xml">
            	<form string="Establecimiento" create="false">	            		
           			<group string="Datos del Establecimiento" colspan="4">
	            		<field name="nombre"/>
	            		<field name="res_partner_id"/>
	            		<field name="descripcion"/>
	            		<field name="longitud"/>
	            		<field name="latitud"/>
	            		<field name="direccion"/>
	            		<field name="localidad"/>
	            		<field name="horario"/>
	            		<field name='idiomas' widget="many2many_tags"/>
	            		<field name="imagen"/>
				<field name="tripadvisor_url"/>
           			</group>	            		
            	</form>	
            </field>
    </record>
    <!-- FORM de una bodega
	<record id="bodega_view_form" model="ir.ui.view">
            <field name="name">bodega.form</field>
            <field name="model">turismo.bodega</field>                  
            <field name="inherit_id" ref="aloxa_turismo.establecimiento_view_form"/>
            <field name="mode">primary</field>
            <field name="priority" eval="15"/>
            <field name="arch" type="xml">
            	<xpath expr="//field[@name='imagen']" position="after">
            		<group string="Productos de la Bodega" colspan="4">
            			<field name="bodega_product_ids" nolabel="1"/>
            		</group>
            	</xpath>
            </field>
    </record> -->
    <!-- FORM de un restaurante 
	<record id="restaurante_view_form" model="ir.ui.view">
            <field name="name">restaurante.form</field>
            <field name="model">turismo.restaurante</field>                  
            <field name="inherit_id" ref="aloxa_turismo.establecimiento_view_form"/>
            <field name="mode">primary</field>
            <field name="priority" eval="15"/>
            <field name="arch" type="xml">
            	<xpath expr="//field[@name='imagen']" position="after">-->
            		<!-- group string="Productos del Restaurante" colspan="4">
            			<field name="restaurante_product_ids" nolabel="1"/>
            		</group-->
            	<!--</xpath>
            </field>
    </record>-->
    <!-- FORM de una hospedaje 
	<record id="hospedaje_view_form" model="ir.ui.view">
            <field name="name">hospedaje.form</field>
            <field name="model">turismo.hospedaje</field>                  
            <field name="inherit_id" ref="aloxa_turismo.establecimiento_view_form"/>
            <field name="mode">primary</field>
            <field name="priority" eval="15"/>
            <field name="arch" type="xml">
            	<xpath expr="//field[@name='imagen']" position="after">-->
            		<!-- group string="Productos del Hospedaje" colspan="4">
            			<field name="hospedaje_product_ids" nolabel="1"/>
            		</group-->
            	 <!--</xpath>
            </field>
    </record>-->
    <!-- FORM de una cultural
	<record id="cultural_view_form" model="ir.ui.view">
            <field name="name">cultural.form</field>
            <field name="model">turismo.cultural</field>                  
            <field name="inherit_id" ref="aloxa_turismo.establecimiento_view_form"/>
            <field name="mode">primary</field>
            <field name="priority" eval="15"/>
            <field name="arch" type="xml">
            	<xpath expr="//field[@name='imagen']" position="after">  -->
            		<!-- group string="Productos Culturales" colspan="4">
            			<field name="cultural_product_ids" nolabel="1"/>
            		</group-->
            	<!--</xpath>
            </field>
    </record>-->
    <!-- FORM de una vinoteca 
	<record id="vinoteca_view_form" model="ir.ui.view">
            <field name="name">vinoteca.form</field>
            <field name="model">turismo.vinoteca</field>                  
            <field name="inherit_id" ref="aloxa_turismo.establecimiento_view_form"/>
            <field name="mode">primary</field>
            <field name="priority" eval="15"/>
            <field name="arch" type="xml">
            	<xpath expr="//field[@name='imagen']" position="after">-->
            		<!-- group string="Productos Culturales" colspan="4">
            			<field name="cultural_product_ids" nolabel="1"/>
            		</group-->
            	<!--</xpath>
            </field>
    </record>-->
    <!-- FORM de un otro 
	<record id="otro_view_form" model="ir.ui.view">
            <field name="name">otro.form</field>
            <field name="model">turismo.otro</field>                  
            <field name="inherit_id" ref="aloxa_turismo.establecimiento_view_form"/>
            <field name="mode">primary</field>
            <field name="priority" eval="15"/>
            <field name="arch" type="xml">
            	<xpath expr="//field[@name='imagen']" position="after">-->
            		<!-- group string="Productos Establecimiento" colspan="4">
            			<field name="otro_product_ids" nolabel="1"/>
            		</group-->
            	<!--</xpath>
            </field>
    </record>-->
<!-- TREES -->
    <!-- TREE de un Establecimiento -->
	<record id="establecimiento_view_tree" model="ir.ui.view">
            <field name="name">establecimiento.tree</field>
            <field name="model">turismo.establecimiento</field>  	
            <field name="arch" type="xml">
            	<tree string="Establecimiento" create="false">           			
            		<field name="nombre"/>
            		<field name="direccion"/>
            		<field name="res_partner_id"/>           				            		
            	</tree>	
            </field>
    </record>
    <!-- TREE de una bodega
	<record id="bodega_view_tree" model="ir.ui.view">
            <field name="name">bodega.tree</field>
            <field name="model">turismo.bodega</field>                  
            <field name="inherit_id" ref="aloxa_turismo.establecimiento_view_tree"/>
            <field name="mode">primary</field>
            <field name="priority" eval="15"/>
            <field name="arch" type="xml">
            	<field name="direccion" position="replace">     	           		
       				<field name="direccion"/>
       			</field>           	
            </field>
    </record> -->
    <!-- TREE de un restaurante 
	<record id="restaurante_view_tree" model="ir.ui.view">
            <field name="name">restaurante.tree</field>
            <field name="model">turismo.restaurante</field>                  
            <field name="inherit_id" ref="aloxa_turismo.establecimiento_view_tree"/>
            <field name="mode">primary</field>
            <field name="priority" eval="15"/>
            <field name="arch" type="xml">
            	<field name="direccion" position="replace">     	           		
       				<field name="direccion"/>
       			</field>           	
            </field>
    </record> -->
    <!-- TREE de un hospedaje 
	<record id="hospedaje_view_tree" model="ir.ui.view">
            <field name="name">hospedaje.tree</field>
            <field name="model">turismo.hospedaje</field>                  
            <field name="inherit_id" ref="aloxa_turismo.establecimiento_view_tree"/>
            <field name="mode">primary</field>
            <field name="priority" eval="15"/>
            <field name="arch" type="xml">
            	<field name="direccion" position="replace">     	           		
       				<field name="direccion"/>
       			</field>           	
            </field>
    </record>-->
    <!-- TREE de un establecimiento cultural 
	<record id="cultural_view_tree" model="ir.ui.view">
            <field name="name">cultural.tree</field>
            <field name="model">turismo.cultural</field>                  
            <field name="inherit_id" ref="aloxa_turismo.establecimiento_view_tree"/>
            <field name="mode">primary</field>
            <field name="priority" eval="15"/>
            <field name="arch" type="xml">
            	<field name="direccion" position="replace">     	           		
       				<field name="direccion"/>
       			</field>           	
            </field>
    </record>-->
    <!-- TREE de una vinoteca 
	<record id="vinoteca_view_tree" model="ir.ui.view">
            <field name="name">vinoteca.tree</field>
            <field name="model">turismo.vinoteca</field>                  
            <field name="inherit_id" ref="aloxa_turismo.establecimiento_view_tree"/>
            <field name="mode">primary</field>
            <field name="priority" eval="15"/>
            <field name="arch" type="xml">
            	<field name="direccion" position="replace">     	           		
       				<field name="direccion"/>
       			</field>           	
            </field>
    </record> -->   
    <!-- TREE de un establecimiento otro 
	<record id="otro_view_tree" model="ir.ui.view">
            <field name="name">otro.tree</field>
            <field name="model">turismo.otro</field>                  
            <field name="inherit_id" ref="aloxa_turismo.establecimiento_view_tree"/>
            <field name="mode">primary</field>
            <field name="priority" eval="15"/>
            <field name="arch" type="xml">
            	<field name="direccion" position="replace">     	           		
       				<field name="direccion"/>
       			</field>           	
            </field>
    </record>-->
<!-- KANBAN -->
<!--  VISTAS KANBAN -->
    <record id="establecimientos_kanban" model="ir.ui.view">
        <field name="name">Tablero de Establecimientos</field>
        <field name="model">turismo.establecimiento</field>        
        <field name="arch" type="xml">       	
   		<kanban>
	        <field name="nombre"/>
	        <templates>
                <t t-name="kanban-box">
                	<a t-if="! read_only_mode" type="delete" style="position: absolute; right: 0; padding: 4px; diplay: inline-block">X</a>
                    <div class="oe_kanban_vignette oe_semantic_html_override">
                    	<a type="open">
                    		<img t-att-src="kanban_image('turismo.establecimiento', 'imagen', record.id.value)"  class="oe_kanban_image"/>
                    	</a>
                    	<div class="oe_kanban_details">
                    		<h4><a type="open"> <field name="nombre"/></a></h4>
                    		<ul>
								<li t-if="record.direccion.raw_value">
									<field name="direccion"/>
								</li>
								<li t-if="record.localidad.raw_value">
									<field name="localidad"/>
								</li>													
                    		</ul>
                    	</div>
                    </div>
                </t>
	        </templates>
	    </kanban>		 	
        </field>
    </record>    
<!--  SEARCH -->
	<!-- SEARCH res.partner para agregar filtros por tipos de establecimiento -->
	<!-- record model="ir.ui.view" id="res_partner_turismo_view_inherit_search">
        <field name="name">tipos.establecimiento.search</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_res_partner_filter" /> 
        <field name="arch" type="xml">
        	<xpath expr="filter[@string='Suppliers']" position='after'>
        		<filter name= "tipo_establecimientos" string="Establecimientos"
        				domain="['|', '|', '!', ['bodega_nombre', '=', '-'], '!', ['restaurante_nombre', '=', '-'], '!', ['hospedaje_nombre', '=', '-']]" />
				<filter name= "tipo_bodega" string="Bodegas" domain="['!',('bodega_nombre','=','-')]" />
				<filter name= "tipo_restaurante" string="Restaurantes" domain="['!',('restaurante_nombre','=','-')]" />
				<filter name= "tipo_hospedaje" string="Hospedajes" domain="['!',('hospedaje_nombre','=','-')]" />								
			</xpath> 
		</field>
	</record-->
<!-- ACTIONS -->
	<record id="establecimiento_action_tree" model="ir.actions.act_window">		
		<field name="name">Establecimientos</field>
		<field name="res_model">turismo.establecimiento</field>		
		<field name="view_mode">kanban,tree,form</field>		
		<field name="view_type">form</field>
		<!-- field name="context">{'search_default_group_by_partner_id': 1}</field-->					 
	</record>
	</data>
</openerp>

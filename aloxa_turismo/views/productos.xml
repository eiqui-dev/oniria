<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
<!-- FORMS -->
	<!-- FORM product.template productos turisticos-->
    <record id="product_template_turismo_inherit_form" model="ir.ui.view">
        <field name="name">product.template.turismo.view.form</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_only_form_view"/>
        <field name="arch" type="xml">
               <xpath expr="//field[@name='sale_ok']" position="before"> 	                	            
                   <field name="servicio"/>                
                   <label for="servicio" string="Servicio Turístico"/>                      
               </xpath>  
           	<xpath expr="//field[@name='type']" position="after">	            		            		
           		<field name='tipo_producto' attrs="{'invisible':[('servicio','=',True)]}"/>           		          		               	
            </xpath>       	
        	<xpath expr="//field[@name='description']" position="before">
	   			<group string="Datos del Link" attrs="{'invisible':['!',('servicio','=',True)]}" col="4">	   				
	   				<field name='link_size' colspan="2"/>
	   				<field name='link_position' colspan="2"/> 				
	   			</group>        		       		
        		<group string="Datos del Vino" attrs="{'invisible':['!',('tipo_producto','=','vino')]}">	   				
	   				<field name='tipovino' colspan="2"/>							  				
   				</group>
        		<group string="Datos del Vinagre" attrs="{'invisible':['!',('tipo_producto','=','vinagre')]}">	   				
	   				<field name='tipovinagre' colspan="2"/>	   					   				  				    								  				
   				</group>   				
   				<group string="" attrs="{'invisible':['!','|',['tipo_producto','=','vinagre'], ['tipo_producto','=','vino']]}" col="4">
	   				<field name='uva' colspan="2"/>
	   				<field name='anho' colspan="2"/>
	   				<field name='premios' colspan="2" widget="many2many_tags"/>	
	   				<field name='establecimiento_id'/>
	   			</group>
	   							
   			</xpath>        	        
        </field>	        
    </record>
    <!-- FORM product.public.category productos servicio turistico -->
    <record id="product_public_category_turismo_inherit_form" model="ir.ui.view">
        <field name="name">product.public.category.turismo.view.form</field>
        <field name="model">product.public.category</field>
        <field name="inherit_id" ref="website_sale.product_public_category_form_view"/>
        <field name="arch" type="xml">
	        <field name="sequence" position="after">
	        	<field name="link" />
	        </field>
    	</field>
    </record>
    <!-- FORM de productos asociados a cliente -->
 	<record id="producto_contratado_cliente_view_form" model="ir.ui.view">
 		<field name="name">producto.contratado.cliente.form</field>
 		<field name="model">turismo.producto_contratado_cliente</field> 		
		<field name="type">form</field>
		<field name="arch" type="xml">
		<form string="Productos Contratados">
			<group>        	
	        	<field name="product_id" domain="[('servicio', '=', True)]"/>
	        	<field name="product_tur_id" domain="[('servicio', '!=', True)]"/>
	        	<field name="establecimiento_id" attrs="{'invisible':[('product_tur_id','!=',False)]}"/>
	        	<field name="publicado"/>
	        	<field name="public_category_id" domain="[('link', '=', True)]"/>
	        	<field name="imagen"/>
	        	<field name="url" attrs="{'invisible':['|',('product_tur_id','!=',False),('establecimiento_id','!=',False)]}"/>
	        	<field name="fecha_inicio"/>
	        	<field name="fecha_fin"/>
	        	<field name="factura_id" attrs="{'invisible':[('factura_id','=',False)]}"/>
    			<button name="generar_factura_servicio" type="object" class="oe_inline oe_stat_button"
    					string="Facturar" icon="fa-check"
    					help="Generar Factura de Servicio"
    					attrs="{'invisible':[('factura_id','!=',False)]}"/>	        
        	</group>
		</form>
		</field>
	</record>
<!-- TREES -->
	<!-- TREE de Productos de Bodega -->
 	<record id="bodega_productos_tree" model="ir.ui.view">
 		<field name="name">bodegas.productos.view.tree</field>
 		<field name="model">product.template</field>	 		
		<field name="type">tree</field>
		<field name="arch" type="xml">
		<tree string="Productos de Bodega">
			<field name="name"/>	        	
		</tree>
		</field>
	</record>
    <!-- TREE de productos asociados a cliente -->
 	<record id="producto_contratado_cliente_view_tree" model="ir.ui.view">
 		<field name="name">producto.contratado.cliente.tree</field>
 		<field name="model">turismo.producto_contratado_cliente</field> 		
		<field name="type">tree</field>
		<field name="arch" type="xml">
		<tree string="Productos Contratados">        	
        	<field name="product_id"/>
        	<field name="product_tur_id"/>
        	<field name="establecimiento_id"/>
        	<field name="publicado"/>
        	<field name="public_category_id"/>
        	<field name="imagen"/>
        	<field name="url"/>
        	<field name="fecha_inicio"/>
        	<field name="fecha_fin"/>
		</tree>
		</field>
	</record>	
    <!-- TREE de vinos -->
 	<record id="producto_vino_view_tree" model="ir.ui.view">
 		<field name="name">producto.vino.tree</field>
 		<field name="model">product.template</field> 		
		<field name="type">tree</field>
		<field name="arch" type="xml">
		<tree string="Vinos">        	
        	<field name="uva"/>
        	<field name="tipovino"/>
        	<field name="anho"/>
        	<field name="premios"/>
		</tree>
		</field>
	</record>
    <!-- TREE de vinagre -->
 	<record id="producto_vinagre_view_tree" model="ir.ui.view">
 		<field name="name">producto.vinagre.tree</field>
 		<field name="model">product.template</field> 		
		<field name="type">tree</field>
		<field name="arch" type="xml">
		<tree string="Vinagre">        	
        	<field name="uva"/>
        	<field name="tipovinagre"/>
        	<field name="premios"/>
		</tree>
		</field>
	</record>	
<!--  SEARCH -->
	<!-- SEARCH product.template para agregar filtros por tipos de producto -->
	<record model="ir.ui.view" id="product_template_turismo_view_inherit_search">
        <field name="name">tipos.producto.search</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_search_view" /> 
        <field name="arch" type="xml">
        	<xpath expr="filter[@string='Services']" position='replace'>
        		<filter name= "producto_contratado" string="Servicio Turístico" domain="[['servicio', '=', True]]" />				
			</xpath> 
			<xpath expr="filter[@string='Consumable']" position='replace'>
        		<!-- filter name= "tipo_productos_turismo" string="Productos Establecimiento"
        				domain="['|', '|', '|', ['tipo_producto', '=', 'visita'], ['tipo_producto', '=', 'menu'], ['tipo_producto', '=', 'vino'], ['tipo_producto', '=', 'habitacion']]" /-->
        		<filter name= "tipo_productos_turismo" string="Productos Establecimiento"
        				domain="['|', ['tipo_producto', '=', 'vino'], ['tipo_producto', '=', 'vinagre']]" />        				
			</xpath>
			<xpath expr="filter[@string='Can be Sold']" position='replace'>
				<filter name= "tipo_vino" string="Vinos" domain="[('tipo_producto','=','vino')]" />
				<filter name= "tipo_vinagre" string="Vinagres" domain="[('tipo_producto','=','vinagre')]" />
				<filter name= "otros" string="Otros" domain="[('tipo_producto','=','')]" />
				<!-- filter name= "tipo_visita" string="Visitas" domain="[('tipo_producto','=','visita')]" />
				<filter name= "tipo_menu" string="Menús" domain="[('tipo_producto','=','menu')]" />
				<filter name= "tipo_habitacion" string="Habitaciones" domain="[('tipo_producto','=','habitacion')]" /-->				
			</xpath>
		</field>
	</record>
	<record model="ir.ui.view" id="producto_contratado_cliente_view_search">
        <field name="name">Search producto contratado</field>
        <field name="model">turismo.producto_contratado_cliente</field> 
        <field name="arch" type="xml">
        	<search>
        		<group expand="0" string="Group By">
					<filter name="group_by_partner_id" string="Cliente"
					        context="{'group_by': 'partner_id'}"/>
		        </group>
        	</search>
		</field>
	</record>
<!-- ACTIONS -->
	<record id="servicios_turisticos_action_tree" model="ir.actions.act_window">		
		<field name="name">Links</field>
		<field name="res_model">product.template</field>		
		<field name="view_mode">tree,form</field>		
		<field name="view_type">form</field>
		<field name="context">{'search_default_producto_contratado': 1, 'default_servicio': 1 }</field>					 
	</record>
	<record id="producto_contratado_action_tree" model="ir.actions.act_window">		
		<field name="name">Links</field>
		<field name="res_model">turismo.producto_contratado_cliente</field>		
		<field name="view_mode">tree,form</field>		
		<field name="view_type">form</field>
		<field name="context">{'search_default_group_by_partner_id': 1}</field>					 
	</record>
	<record id="producto_vino_action_tree" model="ir.actions.act_window">		
		<field name="name">Vinos</field>
		<field name="res_model">product.template</field>		
		<field name="view_mode">tree,form</field>		
		<field name="view_type">form</field>
		<field name="context">{'search_default_tipo_vino': 1}</field>					 
	</record>	
	<record id="producto_vinagre_action_tree" model="ir.actions.act_window">		
		<field name="name">Vinagres</field>
		<field name="res_model">product.template</field>		
		<field name="view_mode">tree,form</field>		
		<field name="view_type">form</field>
		<field name="context">{'search_default_tipo_vinagre': 1}</field>					 
	</record>
	<record id="producto_otros_action_tree" model="ir.actions.act_window">		
		<field name="name">Otros</field>
		<field name="res_model">product.template</field>		
		<field name="view_mode">tree,form</field>		
		<field name="view_type">form</field>
		<field name="context">{'search_default_otros': 1}</field>					 
	</record>
	</data>
</openerp>

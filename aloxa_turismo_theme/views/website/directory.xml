<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    
		<template id="directory" name="Directorio de Establecimientos" page="True">						
			<t t-call="website.layout">
				<!-- Lista de Establecimientos -->
				<div id="wrap" class="js_sale">
	       			<div class="oe_structure"/>
					<div class="container">
						<div class="row">
							<t t-set="view_mode" t-value="request.session['directory_view']"/>
							<div t-att-class="not view_mode == 'form' and 'col-md-2' or 'hidden'" id="products_grid_before">
								<t t-call="aloxa_turismo_theme.filters"/>
							</div>
				            <div t-att-class="view_mode == 'form' and 'col-md-10' or 'col-md-8'" id="directory_grid">
				            	<!-- OPCION ORDENAR POR CAMPO Y BOTONES DE VISTAS -->
								<t t-call="aloxa_turismo_theme.toolbar" />
								
								<!-- VISTA MAPA -->
								<t t-if="view_mode == 'map'">
									<t t-call="aloxa_turismo_theme.directory_map"/>
								</t>
								<!-- VISTA GRID -->
								<t t-if="view_mode == 'grid'">
									<t t-call="aloxa_turismo_theme.directory_grid"/>
								</t>
								<!-- VISTA LISTA -->
								<t t-if="view_mode == 'list'">
									<t t-call="aloxa_turismo_theme.directory_list"/>
								</t>
								<!-- VISTA FORM ESTABLECIMIENTO -->
								<t t-if="view_mode == 'form' and establecimiento">
									<t t-call="aloxa_turismo_theme.directory_form_establecimiento"/>
								</t>
								<!-- VISTA FORM PRODUCTO CONTRATADO -->
								<t t-if="view_mode == 'form' and producto_contratado">
									<t t-call="aloxa_turismo_theme.directory_form_product_contratado"/>
								</t>
								<!-- VISTA FORM EVENTO -->
								<t t-if="view_mode == 'form' and evento">
									<t t-call="aloxa_turismo_theme.directory_form_event"/>
								</t>
							</div>
							<div class="col-md-2">
								<div id="advs">
									&amp;nbsp;
								</div>
							</div>
						</div>
					</div>
				</div>
			</t>
		</template>
		
		<!-- PAGINA DIRECTORIO: FILTROS -->
		<template id="filters">
			<form id="form-filters" class="js_attributes" method="get">
				<input type="hidden" name="search" value=""/>
				<input type="hidden" name="orderby" t-att-value="orderby"/>
				<t t-if="sri">
					<input type="hidden" name="sri" t-att-value="sri"/>
				</t>			    
		        <!-- <h3>FILTROS</h3> -->
        		<div class="accordion" id="leftMenu">
        			<t t-foreach="attributes" t-as="attr">
        				<div class="accordion-group">
	                        <div class="accordion-heading">
	                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#leftMenu" t-att-href="'#collapse-%s' % attr.name">
	                            	<t t-esc="attr.label" />
	                            </a>
	                        </div>
	                        <div t-att-id="'collapse-%s' % attr.name" t-att-class="'accordion-body collapse %s' % ('in' if attr.open else '')" t-att-style="'%s' % ('height: 0px;' if not attr.open else '')">
	                            <div class="accordion-inner">
        							<ul>
        								<t t-set="cont" t-value="0" />
        								<li t-foreach="attr.values" t-as="value">
        									<t t-set="cont" t-value="cont+1" />
        									<input onchange="submit()" type="checkbox" t-att-value="value.name" t-att-name="'%s-%s' % (attr.name,cont)" t-att-checked="'checked' if value.sel else ''" /> <t t-esc="value.label" />
        									<span class="pull-right">(<t t-esc="value.num" />)</span>
        								</li>
	                                </ul>
	                            </div>
	                        </div>
	                    </div>
	            	</t>
                </div>
				<span t-if="not attributes" class="text-muted" style="margin-left:1.5em;">Sin Filtros</span>
			</form>
		</template>
		<!-- FIN PAFINA DIRECTORIO: FILTROS -->
		
	</data>
</openerp>